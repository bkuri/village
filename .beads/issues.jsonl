{"id":"village-0kk","title":"Add unified /confirm with breakdown support","description":"Replace handle_confirm() to detect breakdown vs single task. If breakdown: call _confirm_breakdown() which creates ALL subtasks with dependency mapping. Use item.success_criteria from ST. Auto-save errors to log on failure. Depends on village-u2l (handle_create), village-6zb (decomposition offer), village-zs1 (error handling).","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:26:59.690194634-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:23:52.885687234-06:00","closed_at":"2026-02-14T23:23:52.885687234-06:00","close_reason":"Already implemented: handle_confirm() detects breakdown vs single task, calls _confirm_breakdown() for multi-task creation","labels":["chat","decomposition","llm"],"dependencies":[{"issue_id":"village-0kk","depends_on_id":"village-i64","type":"blocks","created_at":"2026-01-28T13:27:40.564408188-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-1ik","title":"Add data model extensions for task decomposition","description":"Extend ChatSession with current_breakdown: TaskBreakdown field, extend LLMChat with config: _Config field, add imports for TaskBreakdown/TaskBreakdownItem/generate_task_breakdown/validate_dependencies/BaselineReport from village.chat.sequential_thinking","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:25:52.669144057-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:22:51.720370827-06:00","closed_at":"2026-02-14T23:22:51.720370827-06:00","close_reason":"Already implemented: ChatSession.current_breakdown, LLMChat.config, and all required imports","labels":["chat","decomposition","llm"],"dependencies":[{"issue_id":"village-1ik","depends_on_id":"village-cau","type":"blocks","created_at":"2026-01-28T13:25:58.943595197-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-1ik","depends_on_id":"village-wuc","type":"blocks","created_at":"2026-01-28T13:25:58.972861973-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-1ik","depends_on_id":"village-lm2","type":"blocks","created_at":"2026-01-28T13:25:59.001180641-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-1ik","depends_on_id":"village-zs1","type":"blocks","created_at":"2026-01-28T13:25:59.029366435-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-1ik","depends_on_id":"village-36r","type":"blocks","created_at":"2026-01-28T13:25:59.058288447-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-1ik","depends_on_id":"village-u2l","type":"blocks","created_at":"2026-01-28T13:26:48.369243204-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-1ik","depends_on_id":"village-6zb","type":"blocks","created_at":"2026-01-28T13:26:48.454985665-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-21m","title":"Test Task","description":"Test","status":"tombstone","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":480,"created_at":"2026-02-14T21:08:04.035009282-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:17:33.736959194-06:00","deleted_at":"2026-02-14T23:17:33.736959194-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"village-29w","title":"Add unified /edit with ST-based refinement","description":"Modify handle_refine() to detect breakdown vs single task. If breakdown: call _refine_breakdown() which re-invokes Sequential Thinking with current breakdown + user feedback. Ask ST to 'analyze feedback and update breakdown accordingly'. Re-validate dependencies. Depends on village-u2l (handle_create), village-6zb (decomposition offer).","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:26:59.692225324-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:19:28.036652243-06:00","closed_at":"2026-02-14T23:19:28.036652243-06:00","close_reason":"Completed: _refine_breakdown() and CLI config pass implemented","labels":["chat","decomposition","llm"],"dependencies":[{"issue_id":"village-29w","depends_on_id":"village-u2l","type":"blocks","created_at":"2026-01-28T13:27:40.621492616-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-36r","title":"Update help text for decomposition workflow","description":"Replace handle_help() with comprehensive documentation showing: /create (auto-detects complexity), /edit/refine (works for breakdowns), /confirm (creates all subtasks), /discard (clears breakdown), /reset (alias). Examples for complex vs simple tasks.","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:25:20.686320857-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:18:15.990216873-06:00","closed_at":"2026-02-14T23:18:15.990216873-06:00","close_reason":"Completed in this session","labels":["chat","docs"]}
{"id":"village-3rb","title":"Write integration tests for task decomposition","description":"Add TestTaskDecomposition class to tests/chat/test_llm_chat_integration.py with tests for: complex/breakdown detection, /confirm-all creates all subtasks, dependency mapping (indices ‚Üí task IDs), /discard clears breakdown, /edit refines breakdown with ST, /reset alias, error handling with auto-save, /retry preserves inputs. Depends on all implementation tasks.","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:48:35.350414175-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:25:36.3367555-06:00","closed_at":"2026-02-14T23:25:36.3367555-06:00","close_reason":"Already implemented: TestTaskDecomposition class in tests/chat/test_llm_chat_integration.py with 8+ tests covering breakdown detection, dependency mapping, /discard, /edit, /reset alias, error handling, invalid dependencies","labels":["chat","tests"]}
{"id":"village-42i","title":"Test Task","description":"Test","status":"tombstone","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":480,"created_at":"2026-02-14T22:14:23.482663995-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:17:33.495556939-06:00","deleted_at":"2026-02-14T23:17:33.495556939-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"village-4a2","title":"Complete Village Extensibility Framework","description":"Implement all remaining extensibility framework features including integration, testing, documentation, and example domain (MaxiTrader). The extensibility framework provides 7 extension points for domain-specific customization.\n\nCurrent status:\n‚úÖ All 7 extension ABCs implemented\n‚úÖ All default implementations complete\n‚úÖ ExtensionRegistry complete\n‚úÖ Config integration complete\n‚úÖ ChatProcessor integrated in chat loop\n\nRemaining work:\n- Integrate remaining 6 extensions into chat loop\n- Write comprehensive test coverage\n- Create developer documentation and guides\n- Build MaxiTrader example domain\n- Create simple research domain example\n\nSee docs/EXTENSIBILITY.md for full PRD.","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":1440,"created_at":"2026-01-28T22:58:11.577544382-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:18:16.011049718-06:00","closed_at":"2026-02-14T23:18:16.011049718-06:00","close_reason":"Completed in this session","labels":["extensibility","framework","status:closed"]}
{"id":"village-4a2.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: All 7 extension points integrated, tested, documented with examples","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:50.058157221-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.129826103-06:00","closed_at":"2026-02-14T23:41:00.129826103-06:00","close_reason":"Cleaning up state change events","dependencies":[{"issue_id":"village-4a2.1","depends_on_id":"village-4a2","type":"parent-child","created_at":"2026-01-29T00:12:50.059352721-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-59y","title":"Write extension development guide","description":"Create comprehensive developer documentation for building custom Village extensions.\n\nTarget document: docs/EXTENSIBILITY_GUIDE.md\n\nSections to include:\n\n1. Overview\n   - What is extensibility framework\n   - When to use vs when to fork Village\n   - Benefits of extension points\n\n2. Quick Start\n   - 5-minute tutorial: create simple ChatProcessor\n   - Register extension with ExtensionRegistry\n   - Test extension locally\n   - Load extension from config file\n\n3. Extension Points Reference\n   - When to use each of the 7 extensions\n   - Decision matrix for choosing extensions\n   - Example use cases per extension type\n\n4. Step-by-Step Tutorials\n   - Tutorial 1: Input normalization with ChatProcessor\n   - Tutorial 2: Tool caching with ToolInvoker\n   - Tutorial 3: Query refinement with ThinkingRefiner\n   - Tutorial 4: Session persistence with ChatContext\n   - Tutorial 5: Custom task metadata with BeadsIntegrator\n   - Tutorial 6: Dynamic MCP servers with ServerDiscovery\n   - Tutorial 7: Model routing with LLMProviderAdapter\n\n5. Configuration\n   - Config file format for extensions\n   - Environment variable options\n   - Extension loading order\n   - Troubleshooting loading failures\n\n6. Best Practices\n   - When to implement vs use defaults\n   - Error handling and logging\n   - Testing extensions\n   - Performance considerations\n\n7. Examples\n   - Complete examples for each extension type\n   - Multi-extension example (trading domain)\n   - Minimal working examples\n\n8. Migration Guide\n   - Moving from custom fork to extensions\n   - Common patterns and anti-patterns\n\nTarget: 3000-5000 words with code examples\nInclude diagrams and code snippets\n","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":180,"created_at":"2026-01-28T22:59:59.760487624-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:26:57.156293191-06:00","closed_at":"2026-02-14T23:26:57.156293191-06:00","close_reason":"Already implemented: tests/extensibility/ has 4321 lines of tests including test_registry.py (42 tests), test_integration.py (31 tests), and comprehensive docs in EXTENSIBILITY_GUIDE.md (1596 lines)","labels":["documentation","extensibility"],"dependencies":[{"issue_id":"village-59y","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T22:59:59.76202989-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-59y.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: EXTENSIBILITY_GUIDE.md with 4,613 words, 48 code examples, 9 sections","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:50.051731463-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.371635079-06:00","closed_at":"2026-02-14T23:41:00.371635079-06:00","close_reason":"Cleaning up state change events"}
{"id":"village-5dr","title":"Test Task","description":"Test","status":"open","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":480,"created_at":"2026-02-15T11:50:21.087194646-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-15T11:50:21.087194646-06:00"}
{"id":"village-5ev","title":"Implement MaxiTrader ChatContext","description":"Create TradingChatContext for MaxiTrader domain to manage trading session state and enrich with market data.\n\nFeatures to implement:\n\nload_context():\n- Load recent trading tasks for session (last 5)\n- Load knowledge store summaries for tasks\n- Load portfolio snapshot if available\n- Load user's default risk style and timeframe\n\nenrich_context():\n- Fetch latest market data via Perplexity MCP\n  - BTC, ETH, SOL prices\n  - Market cap trends\n  - Recent volatility\n- Calculate portfolio value if holdings present\n- Add safety scores for current market conditions\n- Add recommended parameters based on market state\n\nsave_context():\n- Save task references with timestamps\n- Save market snapshots for historical comparison\n- Save portfolio changes\n- Persist to MaxiTrader session storage\n\nIntegration:\n- Access knowledge store for task lookups\n- Access Perplexity MCP for market data\n- Access MaxiTrader config for risk defaults\n- Access portfolio data from MaxiTrader storage\n\nFiles to create:\n- maxitrader/chat/context.py (TradingChatContext class)\n\nSee EXTENSIBILITY.md lines 341-360 for ChatContext example\n","status":"tombstone","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":120,"created_at":"2026-01-28T23:01:04.639032802-06:00","created_by":"Bernardo Kuri","updated_at":"2026-01-28T23:06:09.172042796-06:00","labels":["extensibility","maxitrader"],"deleted_at":"2026-01-28T23:06:09.172042796-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"village-607","title":"Implement task decomposition in LLM chat","description":"Epic for implementing Sequential Thinking-based task decomposition in village chat. Auto-detects complex tasks, generates breakdowns, offers /confirm to create all subtasks at once with correct dependencies. Includes /edit for refining entire breakdown, /discard to start over. Depends on all implementation tasks (village-1ik through village-29w).","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:27:06.500775329-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:18:16.00280949-06:00","closed_at":"2026-02-14T23:18:16.00280949-06:00","close_reason":"Completed in this session","labels":["chat","decomposition","epic","llm"]}
{"id":"village-6zb","title":"Add decomposition offer with Sequential Thinking","description":"Add _offer_decomposition(task_spec, user_input) method. Creates BaselineReport, calls generate_task_breakdown(), validates dependencies. Passes Beads state for context. Renders breakdown via _render_breakdown(). Depends on village-1ik (data model), village-wuc (rendering).","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:26:21.561409097-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:18:38.960953613-06:00","closed_at":"2026-02-14T23:18:38.960953613-06:00","close_reason":"Completed: _should_decompose() and _offer_decomposition() implemented in llm_chat.py","labels":["chat","decomposition","llm"],"dependencies":[{"issue_id":"village-6zb","depends_on_id":"village-u2l","type":"blocks","created_at":"2026-01-28T13:27:40.526328601-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-7mx","title":"Implement MaxiTrader ToolInvoker","description":"Create TradingToolInvoker for MaxiTrader domain to customize MCP tool invocation for trading workflows.\n\nFeatures to implement:\n\nshould_invoke():\n- Check if Jesse backtest already cached in knowledge store\n- Skip Perplexity searches if trading data is stale (last \u003e1h)\n- Only invoke Jesse backtests if strategy folder exists\n\ntransform_args():\n- Enrich backtest args with historical market data\n- Add default risk style if not specified\n- Add default timeframe if not specified\n- Inject task_id for knowledge store linking\n\non_success():\n- Extract backtest metrics (Sharpe ratio, drawdown, hit rate)\n- Save metrics to knowledge store with task_id reference\n- Cache backtest results for future queries\n- Log backtest completion to MaxiTrader logs\n\non_error():\n- Handle Jesse not-installed errors gracefully\n- Fall back to simulation mode if backtest fails\n- Log errors with trading context for debugging\n\nIntegration:\n- Access knowledge store for cache/queries\n- Access MaxiTrader config for fallback modes\n- Integrate with Jesse MCP server calls\n\nFiles to create:\n- maxitrader/chat/tool_invokers.py (TradingToolInvoker class)\n\nSee EXTENSIBILITY.md lines 177-193 for ToolInvoker example\n","status":"tombstone","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":150,"created_at":"2026-01-28T23:00:51.000774093-06:00","created_by":"Bernardo Kuri","updated_at":"2026-01-28T23:06:09.172042796-06:00","labels":["extensibility","maxitrader"],"deleted_at":"2026-01-28T23:06:09.172042796-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"village-7sr","title":"Integrate BeadsIntegrator into chat loop","description":"Wire BeadsIntegrator extension into village/chat/llm_chat.py to allow domains to customize Beads task creation and updates.\n\nTasks:\n1. Add BeadsIntegrator to LLMChat initialization\n2. Call should_create_bead() before creating Beads tasks\n3. Call create_bead_spec() to get domain-specific bead metadata\n4. Call on_bead_created() after bead creation for domain-specific handling\n5. Call on_bead_updated() when task status changes\n\nBeadsIntegrator already has DefaultBeadsIntegrator implementation in village/extensibility/beads_integrators.py\n\nSee EXTENSIBILITY.md lines 364-402 for BeadsIntegrator specification.\n\nFiles to modify:\n- village/chat/llm_chat.py (add BeadsIntegrator integration in handle_confirm)\n","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":90,"created_at":"2026-01-28T22:58:47.753651235-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:40:38.811850226-06:00","closed_at":"2026-02-14T23:40:38.811850226-06:00","close_reason":"Completed: All extensibility integration points wired into chat loop. ToolInvoker, BeadsIntegrator, LLMProviderAdapter, ServerDiscovery all integrated.","labels":["extensibility","integration"],"dependencies":[{"issue_id":"village-7sr","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T22:58:47.755360904-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-7sr.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: BeadsIntegrator integrated in handle_confirm() and _confirm_breakdown()","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:50.051873007-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.337548735-06:00","closed_at":"2026-02-14T23:41:00.337548735-06:00","close_reason":"Cleaning up state change events"}
{"id":"village-ao7","title":"Create extensibility API reference","description":"Create comprehensive API reference documentation for all extensibility classes and methods.\n\nTarget document: docs/EXTENSIBILITY_API.md\n\nContent per extension point:\n\n1. ChatProcessor\n   - Abstract class documentation\n   - pre_process() method: parameters, return, raises, usage\n   - post_process() method: parameters, return, raises, usage\n   - ProcessingResult dataclass: fields and usage\n   - DefaultChatProcessor implementation details\n   - Code examples\n\n2. ToolInvoker\n   - Abstract class documentation\n   - should_invoke() method: parameters, return, usage\n   - transform_args() method: parameters, return, usage\n   - on_success() method: parameters, return, usage\n   - on_error() method: parameters, return, usage\n   - ToolInvocation dataclass: fields\n   - ToolResult dataclass: fields\n   - DefaultToolInvoker implementation details\n   - Code examples\n\n3. ThinkingRefiner\n   - Abstract class documentation\n   - should_refine() method: parameters, return, usage\n   - refine_query() method: parameters, return, usage\n   - QueryRefinement dataclass: fields\n   - DefaultThinkingRefiner implementation details\n   - Code examples\n\n4. ChatContext\n   - Abstract class documentation\n   - load_context() method: parameters, return, usage\n   - save_context() method: parameters, return, usage\n   - enrich_context() method: parameters, return, usage\n   - SessionContext dataclass: fields, methods\n   - DefaultChatContext implementation details\n   - Code examples\n\n5. BeadsIntegrator\n   - Abstract class documentation\n   - should_create_bead() method: parameters, return, usage\n   - create_bead_spec() method: parameters, return, usage\n   - on_bead_created() method: parameters, return, usage\n   - on_bead_updated() method: parameters, return, usage\n   - BeadSpec dataclass: fields\n   - BeadCreated dataclass: fields\n   - DefaultBeadsIntegrator implementation details\n   - Code examples\n\n6. ServerDiscovery\n   - Abstract class documentation\n   - discover_servers() method: parameters, return, usage\n   - filter_servers() method: parameters, return, usage\n   - should_load_server() method: parameters, return, usage\n   - MCPServer dataclass: fields\n   - DefaultServerDiscovery implementation details\n   - Code examples\n\n7. LLMProviderAdapter\n   - Abstract class documentation\n   - adapt_config() method: parameters, return, usage\n   - should_retry() method: parameters, return, usage\n   - get_retry_delay() method: parameters, return, usage\n   - LLMProviderConfig dataclass: fields\n   - DefaultLLMProviderAdapter implementation details\n   - Code examples\n\n8. ExtensionRegistry\n   - All register_*() methods\n   - All get_*() methods\n   - get_all_names() method\n   - reset_to_defaults() method\n   - Code examples\n\nFormat: Sphinx-style docstrings, type hints, examples\nTarget: 4000-6000 words\n","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":150,"created_at":"2026-01-28T23:00:22.283608591-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:27:22.979120689-06:00","closed_at":"2026-02-14T23:27:22.979120689-06:00","close_reason":"Already implemented: EXTENSIBILITY_API.md (52KB), EXTENSIBILITY_GUIDE.md (47KB), README.md has extensibility section, examples/research/ domain example exists","labels":["documentation","extensibility"],"dependencies":[{"issue_id":"village-ao7","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T23:00:22.285343559-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-ao7.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: EXTENSIBILITY_API.md with 5,282 words, 64 code examples, 11 sections","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:50.053910201-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.269015744-06:00","closed_at":"2026-02-14T23:41:00.269015744-06:00","close_reason":"Cleaning up state change events"}
{"id":"village-bqg","title":"Implement extension module loading from config","description":"Add support for dynamically loading extension implementations from Python modules specified in config or environment variables.\n\nTasks:\n1. Implement module loading logic (importlib.import_module)\n2. Load extension classes from configured modules\n3. Instantiate extensions and register with ExtensionRegistry\n4. Handle errors gracefully (module not found, missing class, import errors)\n5. Add logging for successful/failed extension loading\n\nConfig already has ExtensionConfig with module paths (village/config.py lines 300-351):\n- processor_module\n- tool_invoker_module\n- thinking_refiner_module\n- chat_context_module\n- beads_integrator_module\n- server_discovery_module\n- llm_adapter_module\n\nEnvironment variables also supported:\n- VILLAGE_EXTENSION_PROCESSOR\n- VILLAGE_EXTENSION_TOOL_INVOKER\n- etc.\n\nFiles to modify:\n- village/extensibility/registry.py (add load_from_config() method)\n- village/cli.py (call extension loading on startup)\n","status":"tombstone","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":120,"created_at":"2026-01-28T22:59:06.6125192-06:00","created_by":"Bernardo Kuri","updated_at":"2026-01-28T23:33:28.684859548-06:00","labels":["extensibility","integration"],"dependencies":[{"issue_id":"village-bqg","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T22:59:06.614138193-06:00","created_by":"Bernardo Kuri"}],"deleted_at":"2026-01-28T23:33:28.684859548-06:00","deleted_by":"daemon","delete_reason":"Already completed by ServerDiscovery agent (village-orh) - loader.py created with initialize_extensions() and load_extension_class()","original_type":"task"}
{"id":"village-bu6","title":"Update CLI to pass config to LLMChat","description":"Modify village/cli.py to add config parameter: chat = LLMChat(llm_client, system_prompt=system_prompt, config=config). Single line change. Must be done AFTER all code changes complete. Depends on all Batch 1/2/3 tasks.","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:27:06.499441438-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:24:17.512241278-06:00","closed_at":"2026-02-14T23:24:17.512241278-06:00","close_reason":"Already implemented: CLI passes config to LLMChat (line 745 in cli.py)","labels":["chat","cli"],"dependencies":[{"issue_id":"village-bu6","depends_on_id":"village-0kk","type":"blocks","created_at":"2026-01-28T13:27:40.628516045-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-cau","title":"Add LLM complexity detection without keyword lists","description":"Add _should_decompose(task_spec) method that asks LLM to determine if task should be decomposed. Returns (should_decompose: bool, reasoning: str). Uses semantic understanding instead of brittle keyword matching.","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:25:20.680974853-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:18:38.954329509-06:00","closed_at":"2026-02-14T23:18:38.954329509-06:00","close_reason":"Completed: _should_decompose() and _offer_decomposition() implemented in llm_chat.py","labels":["chat","decomposition","llm"],"dependencies":[{"issue_id":"village-cau","depends_on_id":"village-u2l","type":"blocks","created_at":"2026-01-28T13:26:48.398194395-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-e2c","title":"Write extensibility core tests","description":"Create comprehensive unit tests for all 7 extension ABCs and default implementations.\n\nTests needed for each extension:\n\nChatProcessor (processors.py):\n- DefaultChatProcessor.pre_process() returns input unchanged\n- DefaultChatProcessor.post_process() returns response unchanged\n- Custom ChatProcessor implementations can be registered\n\nToolInvoker (tool_invokers.py):\n- DefaultToolInvoker.should_invoke() always returns True\n- DefaultToolInvoker.transform_args() returns args unchanged\n- DefaultToolInvoker.on_success() returns result unchanged\n- DefaultToolInvoker.on_error() does nothing\n- ToolInvocation dataclass initialization\n- ToolResult dataclass with success/error fields\n\nThinkingRefiner (thinking_refiners.py):\n- DefaultThinkingRefiner.should_refine() returns False\n- DefaultThinkingRefiner.refine_query() returns pass-through\n- QueryRefinement dataclass with all fields\n\nChatContext (context.py):\n- DefaultChatContext.load_context() returns empty SessionContext\n- DefaultChatContext.save_context() does nothing\n- DefaultChatContext.enrich_context() returns unchanged\n- SessionContext.get() and set() methods\n\nBeadsIntegrator (beads_integrators.py):\n- DefaultBeadsIntegrator.should_create_bead() returns False\n- DefaultBeadsIntegrator.create_bead_spec() returns minimal spec\n- DefaultBeadsIntegrator.on_bead_created() does nothing\n- DefaultBeadsIntegrator.on_bead_updated() does nothing\n- BeadSpec and BeadCreated dataclasses\n\nServerDiscovery (server_discovery.py):\n- DefaultServerDiscovery.discover_servers() returns empty list\n- DefaultServerDiscovery.filter_servers() returns unchanged\n- DefaultServerDiscovery.should_load_server() checks enabled flag\n- MCPServer dataclass initialization\n\nLLMProviderAdapter (llm_adapters.py):\n- DefaultLLMProviderAdapter.adapt_config() returns unchanged\n- DefaultLLMProviderAdapter.should_retry() checks error types\n- DefaultLLMProviderAdapter.get_retry_delay() exponential backoff\n- LLMProviderConfig dataclass\n\nFiles to create:\n- tests/extensibility/test_processors.py\n- tests/extensibility/test_tool_invokers.py\n- tests/extensibility/test_thinking_refiners.py\n- tests/extensibility/test_context.py\n- tests/extensibility/test_beads_integrators.py\n- tests/extensibility/test_server_discovery.py\n- tests/extensibility/test_llm_adapters.py\n\nTarget: 90%+ code coverage\n","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":240,"created_at":"2026-01-28T22:59:13.103003702-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:26:57.137581294-06:00","closed_at":"2026-02-14T23:26:57.137581294-06:00","close_reason":"Already implemented: tests/extensibility/ has 4321 lines of tests including test_registry.py (42 tests), test_integration.py (31 tests), and comprehensive docs in EXTENSIBILITY_GUIDE.md (1596 lines)","labels":["extensibility","testing"],"dependencies":[{"issue_id":"village-e2c","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T22:59:13.104609456-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-e2c.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: 206 core tests created, 90%+ coverage, all passing","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:50.057298338-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.16442318-06:00","closed_at":"2026-02-14T23:41:00.16442318-06:00","close_reason":"Cleaning up state change events"}
{"id":"village-e6n","title":"Write integration tests for task decomposition","description":"Add TestTaskDecomposition class to tests/chat/test_llm_chat_integration.py with tests for: complex/breakdown detection, /confirm-all creates all subtasks, dependency mapping (indices ‚Üí task IDs), /discard clears breakdown, /edit refines breakdown with ST, /reset alias, error handling with auto-save. Depends on all implementation tasks.","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:27:06.499335233-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:25:36.342945466-06:00","closed_at":"2026-02-14T23:25:36.342945466-06:00","close_reason":"Already implemented: TestTaskDecomposition class in tests/chat/test_llm_chat_integration.py with 8+ tests covering breakdown detection, dependency mapping, /discard, /edit, /reset alias, error handling, invalid dependencies","labels":["chat","tests"],"dependencies":[{"issue_id":"village-e6n","depends_on_id":"village-0kk","type":"blocks","created_at":"2026-01-28T13:27:45.328200912-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-e81","title":"Create MaxiTrader bootstrap and integration","description":"Create bootstrap.py and integrate MaxiTrader extensions with Village CLI.\n\nTasks:\n\nbootstrap.py:\n- Create maxitrader/chat/bootstrap.py\n- Implement bootstrap_maxitrader_extensions() function\n- Register all MaxiTrader extensions:\n  - TradingChatProcessor\n  - TradingToolInvoker\n  - TradingThinkingRefiner\n  - TradingChatContext\n  - TradingBeadsIntegrator\n- Initialize knowledge store access\n- Initialize MCP server connections\n- Handle errors gracefully\n\nCLI integration:\n- Modify MaxiTrader CLI to call bootstrap\n- Ensure extensions loaded before Village chat starts\n- Pass MaxiTrader config to extensions\n- Test extension registration\n\nConfig integration:\n- Add MaxiTrader-specific config sections\n- Set extension module paths in MaxiTrader config:\n  [extensions]\n  processor_module = \"maxitrader.chat.processors:TradingChatProcessor\"\n  tool_invoker_module = \"maxitrader.chat.tool_invokers:TradingToolInvoker\"\n  thinking_refiner_module = \"maxitrader.chat.thinking_refiners:TradingThinkingRefiner\"\n  chat_context_module = \"maxitrader.chat.context:TradingChatContext\"\n  beads_integrator_module = \"maxitrader.chat.beads_integrators:TradingBeadsIntegrator\"\n\nFiles to create:\n- maxitrader/chat/bootstrap.py\n\nFiles to modify:\n- maxitrader/cli.py (add bootstrap call)\n- maxitrader/config.toml (add extension paths)\n\nSee EXTENSIBILITY.md lines 502-515 for bootstrap pattern\n","status":"tombstone","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":120,"created_at":"2026-01-28T23:02:13.770577758-06:00","created_by":"Bernardo Kuri","updated_at":"2026-01-28T23:06:09.172042796-06:00","labels":["extensibility","maxitrader"],"deleted_at":"2026-01-28T23:06:09.172042796-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"village-hqf","title":"Write extensibility integration tests","description":"Create end-to-end tests for extensibility framework integration with chat loop and CLI.\n\nTests needed:\n\nLLMChat integration:\n- LLMChat initializes with ExtensionRegistry\n- Custom ChatProcessor pre_process() modifies input before LLM\n- Custom ChatProcessor post_process() modifies output after LLM\n- All extension registration methods work with LLMChat\n\nModule loading (once village-bqg is complete):\n- Extensions load from configured modules\n- Import errors are handled gracefully\n- Missing classes are logged and skipped\n- Env vars override config file settings\n\nEnd-to-end scenarios:\n- Mock domain with all 7 extensions registered\n- Chat loop calls all extension methods in correct order\n- Extensions can modify behavior at all hook points\n- Extensions can disable features (e.g., should_invoke returns False)\n\nConfiguration:\n- ExtensionConfig loads correctly from config file\n- ExtensionConfig loads from environment variables\n- Extensions disabled via VILLAGE_EXTENSIONS_ENABLED=false\n- Module paths are resolved and validated\n\nFiles to create:\n- tests/extensibility/test_integration.py\n\nTarget: 80%+ coverage for integration paths\n\nDependencies:\n- village-zdr (ToolInvoker integration)\n- village-zgl (ThinkingRefiner integration)\n- village-ubm (ChatContext integration)\n- village-7sr (BeadsIntegrator integration)\n- village-orh (ServerDiscovery integration)\n- village-uis (LLMProviderAdapter integration)\n- village-bqg (extension module loading)\n","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":180,"created_at":"2026-01-28T22:59:52.885487603-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:26:57.150486598-06:00","closed_at":"2026-02-14T23:26:57.150486598-06:00","close_reason":"Already implemented: tests/extensibility/ has 4321 lines of tests including test_registry.py (42 tests), test_integration.py (31 tests), and comprehensive docs in EXTENSIBILITY_GUIDE.md (1596 lines)","labels":["extensibility","status:closed","testing"],"dependencies":[{"issue_id":"village-hqf","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T22:59:52.886998451-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-hqf","depends_on_id":"village-zdr","type":"discovered-from","created_at":"2026-01-28T22:59:52.888556606-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-hqf","depends_on_id":"village-zgl","type":"discovered-from","created_at":"2026-01-28T22:59:52.889349503-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-hqf","depends_on_id":"village-ubm","type":"discovered-from","created_at":"2026-01-28T22:59:52.89015134-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-hqf","depends_on_id":"village-7sr","type":"discovered-from","created_at":"2026-01-28T22:59:52.890923258-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-hqf","depends_on_id":"village-orh","type":"discovered-from","created_at":"2026-01-28T22:59:52.891717995-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-hqf","depends_on_id":"village-uis","type":"discovered-from","created_at":"2026-01-28T22:59:52.892499403-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-hqf","depends_on_id":"village-bqg","type":"discovered-from","created_at":"2026-01-28T22:59:52.893282051-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-hqf.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: 31 integration tests, 80%+ coverage, all extensions verified","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:50.067946078-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.055854862-06:00","closed_at":"2026-02-14T23:41:00.055854862-06:00","close_reason":"Cleaning up state change events","dependencies":[{"issue_id":"village-hqf.1","depends_on_id":"village-hqf","type":"parent-child","created_at":"2026-01-29T00:12:50.068903338-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-i64","title":"Add unified /discard with breakdown support","description":"Modify handle_discard() to detect breakdown vs single task. If breakdown: clear current_breakdown, report task count. If single task: existing behavior. Simple, unified command for starting over. Depends on village-1ik (data model).","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:26:59.691174921-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:23:25.627482562-06:00","closed_at":"2026-02-14T23:23:25.627482562-06:00","close_reason":"Already implemented: handle_discard() detects breakdown vs single task, clears current_breakdown, reports task count","labels":["chat","cli"],"dependencies":[{"issue_id":"village-i64","depends_on_id":"village-1ik","type":"blocks","created_at":"2026-01-28T13:27:40.592733327-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-j3d","title":"Test Task","description":"Test","status":"tombstone","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":480,"created_at":"2026-02-14T21:32:03.689707068-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:17:33.53858955-06:00","deleted_at":"2026-02-14T23:17:33.53858955-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"village-lm2","title":"Add /reset alias for /discard command","description":"Update SLASH_COMMANDS dict to add '/reset': 'handle_discard' entry. This provides intuitive alias for starting over.","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:25:20.683144718-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:18:15.944619426-06:00","closed_at":"2026-02-14T23:18:15.944619426-06:00","close_reason":"Completed in this session","labels":["chat","cli"]}
{"id":"village-orh","title":"Integrate ServerDiscovery into CLI and config","description":"Wire ServerDiscovery extension into village CLI to allow domains to dynamically discover and filter MCP servers.\n\nTasks:\n1. Add ServerDiscovery to extension registry initialization\n2. Call discover_servers() on startup to get available MCP servers\n3. Call filter_servers() to apply domain-specific filters\n4. Call should_load_server() before loading each server\n5. Integrate with existing MCP client initialization logic\n\nServerDiscovery already has DefaultServerDiscovery implementation in village/extensibility/server_discovery.py\n\nSee EXTENSIBILITY.md lines 406-428 for ServerDiscovery specification.\n\nFiles to modify:\n- village/cli.py (add ServerDiscovery integration)\n- village/llm/factory.py or village/mcp/ files (use discovered servers)\n","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":90,"created_at":"2026-01-28T22:58:53.406266176-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:40:38.814898057-06:00","closed_at":"2026-02-14T23:40:38.814898057-06:00","close_reason":"Completed: All extensibility integration points wired into chat loop. ToolInvoker, BeadsIntegrator, LLMProviderAdapter, ServerDiscovery all integrated.","labels":["extensibility","integration"],"dependencies":[{"issue_id":"village-orh","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T22:58:53.407798552-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-orh.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: ServerDiscovery integrated with loader.py, discover_mcp_servers(), CLI hooks","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:50.05203069-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.303225338-06:00","closed_at":"2026-02-14T23:41:00.303225338-06:00","close_reason":"Cleaning up state change events"}
{"id":"village-t21","title":"Implement MaxiTrader ChatProcessor","description":"Create TradingChatProcessor for MaxiTrader domain to handle trading-specific message preprocessing.\n\nFeatures to implement:\n\nPre-processing:\n- Extract trading pairs from user input (e.g., BTC-ETH, SOL-USDT)\n- Normalize pair formats to standard (e.g., BTC-ETH ‚Üí btc-eth)\n- Extract risk style keywords: aggressive, balanced, conservative, scalping\n- Extract timeframe keywords: 1m, 5m, 15m, 1h, 4h, 1d\n- Query knowledge store for task context if task_id present\n- Enhance system prompt with recent trading data\n\nPost-processing:\n- Format responses with Rich panels for trading metrics\n- Highlight key trading signals (entry/exit, risk levels)\n- Add trading-specific metadata (pair, timeframe, risk style)\n- Format backtest results in tables\n- Add emoji indicators for trading states (üìàüìâ‚ö†Ô∏è)\n\nIntegration:\n- Access knowledge store for context lookup\n- Access MaxiTrader config for risk/timeframe defaults\n- Format output consistent with MaxiTrader CLI style\n\nFiles to create:\n- maxitrader/chat/processors.py (TradingChatProcessor class)\n\nSee EXTENSIBILITY.md lines 74-87 for ChatProcessor example\n","status":"tombstone","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":120,"created_at":"2026-01-28T23:00:44.573073705-06:00","created_by":"Bernardo Kuri","updated_at":"2026-01-28T23:06:09.172042796-06:00","labels":["extensibility","maxitrader"],"deleted_at":"2026-01-28T23:06:09.172042796-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"village-t8j","title":"Write ExtensionRegistry tests","description":"Create comprehensive tests for ExtensionRegistry class in village/extensibility/registry.py.\n\nTests needed:\n\nInitialization:\n- Registry initializes with all default implementations\n- get_all_names() returns correct class names\n\nRegistration methods:\n- register_processor() replaces default with custom\n- register_tool_invoker() replaces default with custom\n- register_thinking_refiner() replaces default with custom\n- register_chat_context() replaces default with custom\n- register_beads_integrator() replaces default with custom\n- register_server_discovery() replaces default with custom\n- register_llm_adapter() replaces default with custom\n\nGetter methods:\n- get_processor() returns registered or default\n- get_tool_invoker() returns registered or default\n- get_thinking_refiner() returns registered or default\n- get_chat_context() returns registered or default\n- get_beads_integrator() returns registered or default\n- get_server_discovery() returns registered or default\n- get_llm_adapter() returns registered or default\n\nReset:\n- reset_to_defaults() resets all extensions to defaults\n\nLogging:\n- Registration methods log debug messages\n- Reset logs debug message\n\nIntegration with mock extensions:\n- Create mock ChatProcessor, ToolInvoker, etc.\n- Verify they're registered and retrieved correctly\n- Verify all extensions can be replaced simultaneously\n\nFiles to create:\n- tests/extensibility/test_registry.py\n\nTarget: 95%+ code coverage\n","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":90,"created_at":"2026-01-28T22:59:18.854794594-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:26:57.143689026-06:00","closed_at":"2026-02-14T23:26:57.143689026-06:00","close_reason":"Already implemented: tests/extensibility/ has 4321 lines of tests including test_registry.py (42 tests), test_integration.py (31 tests), and comprehensive docs in EXTENSIBILITY_GUIDE.md (1596 lines)","labels":["extensibility","testing"],"dependencies":[{"issue_id":"village-t8j","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T22:59:18.856287682-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-t8j.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: 42 Registry tests, 100% coverage, all passing","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:50.050827281-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.439420854-06:00","closed_at":"2026-02-14T23:41:00.439420854-06:00","close_reason":"Cleaning up state change events"}
{"id":"village-twn","title":"Update CLI to pass config to LLMChat","description":"Modify village/cli.py to add config parameter to LLMChat initialization. Change from: chat = LLMChat(llm_client, system_prompt=system_prompt) to: chat = LLMChat(llm_client, system_prompt=system_prompt, config=config). Single line change. Must be done AFTER all code changes complete. Depends on all Batch 1/2 tasks (village-0kk through village-e6n).","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:48:35.349973824-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:19:28.042479514-06:00","closed_at":"2026-02-14T23:19:28.042479514-06:00","close_reason":"Completed: _refine_breakdown() and CLI config pass implemented","labels":["chat","cli"]}
{"id":"village-u2l","title":"Update handle_create flow with complexity detection","description":"Modify handle_create() to: 1) Parse TaskSpec, 2) Call _should_decompose(), 3) Branch: breakdown ‚Üí _offer_decomposition() or single task ‚Üí render task_spec. Depends on village-1ik (data model), village-cau (complexity detection), village-wuc (breakdown rendering).","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:26:21.559951082-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:18:15.996829999-06:00","closed_at":"2026-02-14T23:18:15.996829999-06:00","close_reason":"Completed in this session","labels":["chat","decomposition","llm"]}
{"id":"village-ubm","title":"Integrate ChatContext into chat loop","description":"Wire ChatContext extension into village/chat/llm_chat.py to allow domains to manage session state and load/save context.\n\nTasks:\n1. Add ChatContext to LLMChat initialization\n2. Add session_id generation/tracking for chat sessions\n3. Call load_context() when session starts or resumes\n4. Call enrich_context() to add domain-specific data before LLM calls\n5. Call save_context() after each message to persist state\n\nChatContext already has DefaultChatContext implementation in village/extensibility/context.py\n\nSee EXTENSIBILITY.md lines 291-360 for ChatContext specification.\n\nFiles to modify:\n- village/chat/llm_chat.py (add ChatContext integration, add session tracking)\n","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":90,"created_at":"2026-01-28T22:58:42.884113334-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:28:06.48776947-06:00","closed_at":"2026-02-14T23:28:06.48776947-06:00","close_reason":"Already implemented: ThinkingRefiner integrated at llm_chat.py:199-202, ChatContext integrated at llm_chat.py:182-213","labels":["extensibility","integration"],"dependencies":[{"issue_id":"village-ubm","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T22:58:42.885627091-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-ubm.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: ChatContext integrated with session_id tracking and context lifecycle","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:50.051610898-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.404932149-06:00","closed_at":"2026-02-14T23:41:00.404932149-06:00","close_reason":"Cleaning up state change events"}
{"id":"village-uis","title":"Integrate LLMProviderAdapter into chat loop","description":"Wire LLMProviderAdapter extension into village/chat/llm_chat.py to allow domains to customize LLM provider configuration and retry logic.\n\nTasks:\n1. Add LLMProviderAdapter to LLMChat initialization\n2. Call adapt_config() before making LLM calls to customize model/settings\n3. Call should_retry() on LLM errors to determine if retry is needed\n4. Call get_retry_delay() to calculate exponential backoff delays\n5. Integrate with existing LLMClient error handling\n\nLLMProviderAdapter already has DefaultLLMProviderAdapter implementation in village/extensibility/llm_adapters.py\n\nSee EXTENSIBILITY.md lines 432-461 for LLMProviderAdapter specification.\n\nFiles to modify:\n- village/chat/llm_chat.py (add LLMProviderAdapter integration)\n- village/llm/client.py (potentially add retry logic if not present)\n","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":90,"created_at":"2026-01-28T22:58:58.520752333-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:40:38.817767691-06:00","closed_at":"2026-02-14T23:40:38.817767691-06:00","close_reason":"Completed: All extensibility integration points wired into chat loop. ToolInvoker, BeadsIntegrator, LLMProviderAdapter, ServerDiscovery all integrated.","labels":["extensibility","integration"],"dependencies":[{"issue_id":"village-uis","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T22:58:58.522285279-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-uis.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: LLMProviderAdapter integrated with _call_llm_with_retry() and exponential backoff","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:50.04896546-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.47541566-06:00","closed_at":"2026-02-14T23:41:00.47541566-06:00","close_reason":"Cleaning up state change events"}
{"id":"village-vcs","title":"Update README with extensibility info","description":"Update main README.md to highlight extensibility framework capabilities.\n\nUpdates needed:\n\n1. Overview section\n   - Add mention of extensibility framework\n   - Brief explanation of 7 extension points\n   - Link to EXTENSIBILITY.md and EXTENSIBILITY_GUIDE.md\n\n2. Features section\n   - Add bullet point for extensibility\n   - Highlight that Village can be customized for domains\n   - Mention no-fork customization approach\n\n3. Quick Start\n   - Optional: Add quick example of custom extension\n   - Show config snippet for loading extensions\n\n4. Documentation links\n   - Add link to EXTENSIBILITY.md (PRD)\n   - Add link to EXTENSIBILITY_GUIDE.md (dev guide)\n   - Add link to EXTENSIBILITY_API.md (API reference)\n\n5. Examples section\n   - Add link to MaxiTrader example (once created)\n   - Add link to research domain example (once created)\n\nKeep existing content intact\nAdd extensibility as enhancement, not replacement\nMake links clear and prominent\n\nFiles to modify:\n- README.md\n\nTarget: 300-500 words added\n","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":30,"created_at":"2026-01-28T23:00:28.179915088-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:27:22.985732914-06:00","closed_at":"2026-02-14T23:27:22.985732914-06:00","close_reason":"Already implemented: EXTENSIBILITY_API.md (52KB), EXTENSIBILITY_GUIDE.md (47KB), README.md has extensibility section, examples/research/ domain example exists","labels":["documentation","extensibility"],"dependencies":[{"issue_id":"village-vcs","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T23:00:28.181503802-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-vcs","depends_on_id":"village-59y","type":"discovered-from","created_at":"2026-01-28T23:00:28.183164383-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-vcs","depends_on_id":"village-ao7","type":"discovered-from","created_at":"2026-01-28T23:00:28.18396229-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-vcs.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: README updated with extensibility section, links, and 163 words","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:50.055395338-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.233974449-06:00","closed_at":"2026-02-14T23:41:00.233974449-06:00","close_reason":"Cleaning up state change events"}
{"id":"village-vcz","title":"Implement MaxiTrader ThinkingRefiner","description":"Create TradingThinkingRefiner for MaxiTrader domain to break down trading queries into structured analysis steps.\n\nFeatures to implement:\n\nshould_refine():\n- Only refine if trading context present (task_id, pair, etc.)\n- Skip refinement for simple queries (e.g., \"show my strategies\")\n\nrefine_query():\n- Break \"was aggressive better?\" into analysis steps:\n  1. Query knowledge store for aggressive strategies\n  2. Query knowledge store for balanced strategies\n  3. Run counterfactual backtests via Jesse\n  4. Compare metrics (Sharpe, drawdown, hit rate)\n  5. Generate recommendation\n\n- Break \"optimize for max profit\" into:\n  1. Identify current strategy parameters\n  2. Query historical performance by parameter\n  3. Find optimal parameter combinations\n  4. Run validation backtests\n  5. Generate optimized config\n\n- Set required_data_sources: [\"knowledge_store\", \"jesse\", \"perplexity\"]\n- Set domain_context: {\"task_id\": task_id, \"pair\": pair, \"risk_style\": risk}\n\nIntegration:\n- Access knowledge store for strategy lookups\n- Access Jesse MCP for backtest steps\n- Generate step-by-step trading analysis\n\nFiles to create:\n- maxitrader/chat/thinking_refiners.py (TradingThinkingRefiner class)\n\nSee EXTENSIBILITY.md lines 262-287 for ThinkingRefiner example\n","status":"tombstone","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":120,"created_at":"2026-01-28T23:00:57.353421726-06:00","created_by":"Bernardo Kuri","updated_at":"2026-01-28T23:06:09.172042796-06:00","labels":["extensibility","maxitrader"],"deleted_at":"2026-01-28T23:06:09.172042796-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"village-vg3","title":"Create simple research domain example","description":"Create a simple research domain to demonstrate extensibility framework with non-trading use case.\n\nResearch domain features:\n\nChatProcessor:\n- Extract research topics and questions from user input\n- Normalize research query format\n- Post-process with citation formatting (APA, MLA, etc.)\n\nThinkingRefiner:\n- Break research queries into steps:\n  1. Define research question\n  2. Identify key terms and concepts\n  3. Search academic databases\n  4. Analyze and synthesize findings\n  5. Generate citations and bibliography\n\nToolInvoker:\n- Cache research queries in local database\n- Filter to only use research-focused MCP servers\n- Log all research queries for audit trail\n\nChatContext:\n- Load recent research topics for session\n- Save research history and findings\n- Track citation collections\n\nBeadsIntegrator:\n- Create research project beads with metadata:\n  - research_field: academic domain\n  - methodology: qualitative/quantitative/mixed\n  - sources: number of sources cited\n- Add tags: [\"research\", field_name]\n- Link research subtasks to main project\n\nBootstrap:\n- Create research/chat/bootstrap.py\n- Register all research extensions\n- Load research-specific config\n\nExample use cases:\n- \"Research machine learning interpretability\" ‚Üí creates research project\n- \"Compare supervised vs reinforcement learning\" ‚Üí breaks into comparison steps\n- \"Find papers on LLM safety\" ‚Üí uses academic search MCP\n\nFiles to create:\n- research/chat/processors.py\n- research/chat/thinking_refiners.py\n- research/chat/tool_invokers.py\n- research/chat/context.py\n- research/chat/beads_integrators.py\n- research/chat/bootstrap.py\n- research/config.example.toml\n\nTarget: Minimal working example, not full-featured research tool\nUse case: Demonstrate extensibility for non-trading domains\n\nSee EXTENSIBILITY.md lines 586-591 for example requirement\n","status":"closed","priority":3,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":240,"created_at":"2026-01-28T23:02:29.526028111-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:27:22.992050481-06:00","closed_at":"2026-02-14T23:27:22.992050481-06:00","close_reason":"Already implemented: EXTENSIBILITY_API.md (52KB), EXTENSIBILITY_GUIDE.md (47KB), README.md has extensibility section, examples/research/ domain example exists","labels":["documentation","example","extensibility"],"dependencies":[{"issue_id":"village-vg3","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T23:02:29.527767448-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-vg3.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: Research domain example with 6 extensions, 11 files, test_extensions.py","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:50.056158096-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.199004388-06:00","closed_at":"2026-02-14T23:41:00.199004388-06:00","close_reason":"Cleaning up state change events"}
{"id":"village-wuc","title":"Add breakdown rendering with title-based dependencies","description":"Add _render_breakdown(breakdown) method to render TaskBreakdown as ASCII table. Map dependency indices to task titles (not numbers) for better UX. Display all subtasks with titles, descriptions, dependencies [mapped to titles], estimates. Show action hints: /confirm, /edit, /discard.","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:25:20.68173759-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:19:52.944661956-06:00","closed_at":"2026-02-14T23:19:52.944661956-06:00","close_reason":"Completed: _render_breakdown() with title-based dependencies","labels":["chat","llm","ui"],"dependencies":[{"issue_id":"village-wuc","depends_on_id":"village-u2l","type":"blocks","created_at":"2026-01-28T13:26:48.426573561-06:00","created_by":"Bernardo Kuri"},{"issue_id":"village-wuc","depends_on_id":"village-6zb","type":"blocks","created_at":"2026-01-28T13:26:52.272610206-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-xze","title":"Implement MaxiTrader BeadsIntegrator","description":"Create TradingBeadsIntegrator for MaxiTrader domain to customize Beads task creation with trading metadata.\n\nFeatures to implement:\n\nshould_create_bead():\n- Create beads for all trading tasks\n- Check if bead already exists for this strategy\n\ncreate_bead_spec():\n- Extract trading metadata from context:\n  - strategy_path: path to strategy folder\n  - risk_style: aggressive/balanced/conservative\n  - trading_pair: BTC-ETH, SOL-USDT, etc.\n  - timeframe: 1h, 4h, 1d, etc.\n- Add tags: [\"trading\", \"backtest\", pair, risk_style]\n- Set priority based on risk style (aggressive=0, conservative=2)\n- Link to parent strategy task if exists\n\non_bead_created():\n- Link bead to strategy folder in knowledge store\n- Index bead by trading pair and risk style\n- Add bead to strategy's analysis history\n\non_bead_updated():\n- Update knowledge store when task status changes\n- Trigger strategy re-evaluation on completion\n- Log milestone events (backtest started, completed, failed)\n\nIntegration:\n- Access knowledge store for linking\n- Access MaxiTrader strategy folders for paths\n- Generate Beads tasks with trading context\n\nFiles to create:\n- maxitrader/chat/beads_integrators.py (TradingBeadsIntegrator class)\n\nSee EXTENSIBILITY.md lines 340-359 for BeadsIntegrator example\n","status":"tombstone","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":90,"created_at":"2026-01-28T23:01:11.918589572-06:00","created_by":"Bernardo Kuri","updated_at":"2026-01-28T23:06:09.172042796-06:00","labels":["extensibility","maxitrader"],"deleted_at":"2026-01-28T23:06:09.172042796-06:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"village-zdr","title":"Integrate ToolInvoker into chat loop","description":"Wire ToolInvoker extension into village/chat/llm_chat.py to allow domains to customize MCP tool invocation.\n\nTasks:\n1. Add ToolInvoker to LLMChat initialization\n2. Call should_invoke() before invoking MCP tools in chat responses\n3. Call transform_args() to allow domain to modify tool arguments\n4. Call on_success() after successful tool invocation for caching/logging\n5. Call on_error() when tool invocation fails\n\nToolInvoker already has DefaultToolInvoker implementation in village/extensibility/tool_invokers.py\n\nSee EXTENSIBILITY.md lines 91-174 for ToolInvoker specification.\n\nFiles to modify:\n- village/chat/llm_chat.py (add ToolInvoker integration points)\n","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":120,"created_at":"2026-01-28T22:58:25.67381045-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:40:38.808885109-06:00","closed_at":"2026-02-14T23:40:38.808885109-06:00","close_reason":"Completed: All extensibility integration points wired into chat loop. ToolInvoker, BeadsIntegrator, LLMProviderAdapter, ServerDiscovery all integrated.","labels":["extensibility","integration","status:closed"],"dependencies":[{"issue_id":"village-zdr","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T22:58:25.690436143-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-zdr.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: ToolInvoker integrated with _invoke_tool_with_hooks() method in llm_chat.py","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:39.548717878-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.509808232-06:00","closed_at":"2026-02-14T23:41:00.509808232-06:00","close_reason":"Cleaning up state change events","dependencies":[{"issue_id":"village-zdr.1","depends_on_id":"village-zdr","type":"parent-child","created_at":"2026-01-29T00:12:39.549660448-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-zgl","title":"Integrate ThinkingRefiner into chat loop","description":"Wire ThinkingRefiner extension into village/chat/llm_chat.py to allow domains to break down user queries into structured analysis steps before sequential thinking.\n\nTasks:\n1. Add ThinkingRefiner to LLMChat initialization\n2. Call should_refine() before processing user queries\n3. Call refine_query() to get analysis steps and data sources\n4. Use refined_steps to guide LLM thinking process\n5. Use required_data_sources to inform MCP tool availability\n\nThinkingRefiner already has DefaultThinkingRefiner implementation in village/extensibility/thinking_refiners.py\n\nSee EXTENSIBILITY.md lines 197-288 for ThinkingRefiner specification.\n\nFiles to modify:\n- village/chat/llm_chat.py (add ThinkingRefiner integration)\n","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","estimated_minutes":120,"created_at":"2026-01-28T22:58:30.429133872-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:28:06.481147616-06:00","closed_at":"2026-02-14T23:28:06.481147616-06:00","close_reason":"Already implemented: ThinkingRefiner integrated at llm_chat.py:199-202, ChatContext integrated at llm_chat.py:182-213","labels":["extensibility","integration","status:closed"],"dependencies":[{"issue_id":"village-zgl","depends_on_id":"village-4a2","type":"blocks","created_at":"2026-01-28T22:58:30.430679388-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-zgl.1","title":"State change: status ‚Üí closed","description":"Set status to closed\n\nReason: Completed: ThinkingRefiner integrated with query_refinement tracking in ChatSession","status":"closed","priority":4,"issue_type":"event","created_at":"2026-01-29T00:12:50.063232337-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:41:00.096088654-06:00","closed_at":"2026-02-14T23:41:00.096088654-06:00","close_reason":"Cleaning up state change events","dependencies":[{"issue_id":"village-zgl.1","depends_on_id":"village-zgl","type":"parent-child","created_at":"2026-01-29T00:12:50.065628846-06:00","created_by":"Bernardo Kuri"}]}
{"id":"village-zs1","title":"Add decomposition error handling with auto-save","description":"Add _render_decomposition_error() method that shows full context: error message, task info (title/desc/scope), partial/invalid breakdown. Auto-save full error details to .village/error.log on retry/failure. Actions: /retry, /discard, /confirm-simple.","status":"closed","priority":2,"issue_type":"task","owner":"github@bkuri.com","created_at":"2026-01-28T13:25:20.685210436-06:00","created_by":"Bernardo Kuri","updated_at":"2026-02-14T23:18:15.983831602-06:00","closed_at":"2026-02-14T23:18:15.983831602-06:00","close_reason":"Completed in this session","labels":["chat","error-handling"]}
