# Village Configuration: Monorepo Template
# 
# This config is for monorepo projects with multiple packages/services.
# Three specialized agents: backend, frontend, test.
#
# Copy this to .village/config and customize for your project.

[DEFAULT]
# Default agent to use if task ID doesn't match a specific agent
DEFAULT_AGENT=backend

# Source control management (git or jj)
SCM=git

# Maximum number of concurrent workers
MAX_WORKERS=3

# Beads configuration (optional, defaults shown)
# BEADS_DIR=.beads

# Queue deduplication TTL (minutes)
# QUEUE_TTL_MINUTES=5

[agent.backend]
# Backend agent: API, business logic, database changes
# Tasks matching "backend-*" pattern (first part before colon or dash)

# OpenCode arguments (passed to opencode command)
opencode_args=--mode patch

# Custom contract file (optional, remove if using PPC)
contract=contracts/backend.md

# PPC mode (if ppc is installed)
# build: Build-focused, conservative changes
# explore: Exploratory, more creative
ppc_mode=build

# PPC traits (comma-separated)
# conservative: Safe, minimal changes
# terse: Concise output
# verbose: Detailed output
ppc_traits=conservative,terse

# PPC output format
# markdown, text, json
ppc_format=markdown

[agent.frontend]
# Frontend agent: UI components, user flows, styling
# Tasks matching "frontend-*" pattern

opencode_args=--mode patch
contract=contracts/frontend.md
ppc_mode=explore
ppc_traits=verbose
ppc_format=markdown

[agent.test]
# Test agent: E2E tests, integration tests, test coverage
# Tasks matching "test-*" pattern

# Use --safe flag for testing (dry-run by default)
opencode_args=--mode patch --safe
contract=contracts/test.md
ppc_mode=explore
ppc_traits=terse
ppc_format=markdown
