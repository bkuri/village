# Village Configuration: Microservices Template
#
# This config is for microservices projects with multiple separate repositories.
# Each service has its own Village instance with a default agent.
#
# Copy this to each service's .village/config and set DEFAULT_AGENT appropriately.
#
# Example usage:
# - service-auth/   -> Set DEFAULT_AGENT=auth
# - service-payment/ -> Set DEFAULT_AGENT=payment
# - service-inventory/ -> Set DEFAULT_AGENT=inventory

[DEFAULT]
# IMPORTANT: Set this to match your service's agent type
# For auth service: DEFAULT_AGENT=auth
# For payment service: DEFAULT_AGENT=payment
# For inventory service: DEFAULT_AGENT=inventory
DEFAULT_AGENT=auth

# Source control management (git or jj)
SCM=git

# Maximum number of concurrent workers per service
MAX_WORKERS=2

# Beads configuration (point to shared-tasks repository)
# Option A: Symlink
# ln -s /path/to/shared-tasks .beads
#
# Option B: Environment variable
# export BEADS_DIR=/path/to/shared-tasks
#
# Option C: Beads remote (see Beads docs)

# Queue deduplication TTL (minutes)
# QUEUE_TTL_MINUTES=5

[agent.auth]
# Authentication service agent: OAuth, JWT, user management
# Tasks matching "auth-*" pattern

opencode_args=--mode patch
contract=contracts/auth.md
ppc_mode=build
ppc_traits=conservative,terse
ppc_format=markdown

[agent.payment]
# Payment service agent: Stripe integration, webhooks, transactions
# Tasks matching "payment-*" pattern

opencode_args=--mode patch
contract=contracts/payment.md
ppc_mode=build
ppc_traits=conservative,terse
ppc_format=markdown

[agent.inventory]
# Inventory service agent: stock tracking, reservations, alerts
# Tasks matching "inventory-*" pattern

opencode_args=--mode patch
contract=contracts/inventory.md
ppc_mode=explore
ppc_traits=verbose
ppc_format=markdown

# Additional service agents can be added here:
# [agent.notification]
# [agent.shipping]
# [agent.analytics]
# etc.
